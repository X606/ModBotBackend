<head>
	<style>
		body {
			background-color: #121212;
			color: white;
			font-family: Arial, Helvetica, sans-serif;
		}

		.console {
			position: fixed;
			bottom: 50px;
			left: 10px;
			right: 10px;
			top: 10px;
			overflow-y: scroll;
		}

		.input {
			position: fixed;
			left: 0px;
			right: 0px;
			bottom: 0px;
			height: 40px;
			background-color: #222222;
			padding: 0.2em;
			font-size: 2em;
		}
	</style>
	<script>
		var API;

		window.onload = async function() {
			const input = document.getElementById('input');
		
			websocket = new WebSocket("ws://192.168.1.100/api?operation=openConsoleWebSocket");
			websocket.onmessage = function(e) {
				WriteToConsole(e.data);
			}

			input.addEventListener('keydown', (evt) => {
				if (evt.keyCode === 13) {
					evt.preventDefault();
					OnCommandRan(input.innerHTML);
					input.innerHTML = "";
				}
			});

			API = (await import("./javascript/Modules/API/Api.js")).API;
		}

		function OnCommandRan(command)
		{
			command = command.replaceAll("<br>","").trim();
			API.adminCommand(command);
		}
		function WriteToConsole(message)
		{
			var console = document.getElementById("console");
			console.innerHTML += message + "<br>";
			console.scrollTop = console.scrollHeight - console.clientHeight;
		}
	</script>
</head>
<body>
	<p id="console" class="console"></p>
	<div contenteditable="true" class="input" id="input"></div>

</body>